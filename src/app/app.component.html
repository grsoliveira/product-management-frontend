<p-toast position="top-right"></p-toast>

<div class="mb-3">
  <p-button
    label="Novo Produto"
    icon="pi pi-plus"
    (click)="openDialogToCreate()"
  ></p-button>
</div>

<br />
<p-table [value]="products"
         showGridlines
         stripedRows
         [rows]="10"
         [rowsPerPageOptions]="[10, 25, 50]"
         [paginator]="true"
         [tableStyle]="{ 'min-width': '50rem' }">
  <ng-template pTemplate="header">
    <tr>
      <th pSortableColumn="name" style="width:25%">
        Nome
        <p-sortIcon field="name"/>
      </th>
      <th pSortableColumn="price" style="width:20%">
        Preço
        <p-sortIcon field="price"/>
      </th>
      <th pSortableColumn="category" style="width:25%">
        Categoria
        <p-sortIcon field="category"/>
      </th>
      <th style="width:20%">
        Ações
      </th>
    </tr>
  </ng-template>

  <ng-template pTemplate="body" let-product>
    <tr>
      <td>{{product.name}}</td>
      <td>{{product.price | currency:'BRL'}}</td>
      <td>{{product.category?.name}}</td>
      <td>
        <p-button label="Editar"
                  (click)="openDialogToEdit(product)"
                  [style]="{'margin-right': '.5em'}"/>
        <p-button label="Excluir"
                  (click)="openDialogToDelete(product)"/>
      </td>
    </tr>
  </ng-template>
</p-table>

<app-delete-product-dialog
  [(visible)]="deleteDialogVisible"
  [product]="selectedProduct"
  (confirmDelete)="deleteProduct($event)"
/>

<app-edit-product-dialog
  [(visible)]="editDialogVisible"
  [product]="selectedProduct"
  (confirmEdit)="updateProduct($event)"
/>

  <app-create-product-dialog
    [(visible)]="createDialogVisible"
    (confirmCreate)="createProduct($event)"
/>
